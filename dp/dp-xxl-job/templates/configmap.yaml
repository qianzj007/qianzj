apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "dp-xxl-job.fullname" . }}
  labels:
    {{- include "dp-xxl-job.labels" . | nindent 4 }}
data:
  {{with .Values.config}}
  PARAMS: "--spring.datasource.url=jdbc:mysql://{{ .datasource.host }}:{{.datasource.port}}/{{.datasource.dbName}}?{{.datasource.params}} \
  --spring.datasource.username={{.datasource.userName}} \
  --spring.datasource.password={{.datasource.password}} \
  --spring.datasource.driver-class-name={{.datasource.driverClassname}} \
  --xxl.job.accessToken={{.job.accessToken}} \
  --xxl.job.i18n={{.job.i18n}} \
  --xxl.job.triggerpool.fast.max={{.job.triggerPool.fast.max}} \
  --xxl.job.triggerpool.slow.max={{.job.triggerPool.slow.max}} \
  --xxl.job.logretentiondays={{.job.logRetentionDays}}"
  {{end}}
